var app=angular.module("restoApp",["firebase","ngRoute","ngAria"]);app.run(["$location","$rootScope",function(e,t){var r,o;t.$on("$routeChangeSuccess",function(e,s,n){s.$$route&&(o=s.$$route.originalPath,t.title=s.$$route.title),n&&n.$$route&&(r=n.$$route.originalPath)}),t.$on("$viewContentLoaded",function(){r&&$("header").attr("tabIndex",-1).focus()}),t.sortBy="",t.query=""}]),app.controller("maincontroller",["$scope","$rootScope","$firebaseObject","MyYelpAPI",function(e,t,r,o){new Firebase("https://r-review.firebaseio.com");e.businesses=[],e.categories=[],o.retrieveYelp().then(function(r){e.businesses=r,e.sortBy=t.sortBy,e.query=t.query}),e.$watch("sortBy",function(r,o){t.sortBy=e.sortBy}),e.$watch("query",function(r,o){t.query=e.query})}]).controller("restodetailctlr",["$scope","MyYelpAPI","$routeParams","$timeout",function(e,t,r,o){e.getMessage="",t.retrieveYelp().then(function(t){e.obj={},e.businesses=t;for(var o=0;o<e.businesses.length;o++)e.businesses[o].id===r.id&&(e.obj=e.businesses[o])}),e.submitRev=function(t){e.getMessage="Review Submitted";var r='<li><img src="http://s3-media3.fl.yelpcdn.com/photo/hk31BkJvJ8qcqoUvZ38rmQ/ms.jpg"><h4>'+e.revName+'</h4><img src="https://s3-media1.fl.yelpcdn.com/assets/2/www/img/f1def11e4e79/ico/stars/v1/stars_5.png"><p>'+e.review+"</p></li>";$(".resto-reviews ul").append(r),e.revName="",e.review="",e.form1.$setPristine(),e.form1.$setUntouched(),$(".check").modal("show"),$(".check").on("shown.bs.modal",function(){$(".closeBtn").focus()})},$(".check").on("hidden.bs.modal",function(){$("header").attr("tabIndex",-1).focus()})}]).factory("MyYelpAPI",function(e){return{retrieveYelp:function(){return e.get("data/restaurant-data.json").then(function(e){return e.data})}}}).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/resto-list.html",controller:"maincontroller",title:"Restaurant Review Site"}).when("/:id",{templateUrl:"views/resto-details.html",controller:"restodetailctlr",title:"Details of restaurant"}).otherwise({redirectTo:"/"})}]);